(function($) {
    'use strict';

    // Теперь точно можно использовать
    const imageBasePath = aboutVars.templateUri + '/images/';
    console.log('Image base path:', imageBasePath); // Проверка пути
    // Функция debounce для оптимизации обработки resize
    function debounce(func, wait) {
        let timeout;
        return function() {
            const context = this, args = arguments;
            clearTimeout(timeout);
            timeout = setTimeout(function() {
                func.apply(context, args);
            }, wait);
        };
    }

    // Инициализация секции "О нас"
    function initAboutSection() {
        const $aboutWrapper = $('.about__wrapper');
        if (!$aboutWrapper.length) return;

        // Данные для секции "О нас" (можно вынести в отдельный объект или получать через AJAX)
        const aboutData = {
            desktop: [
                {
                    type: 'text',
                    content: '<h4>Hacıbaba Flavors – мастер вкуса,<br> вдохновленный традициями, с 1988 года.</h4><p>Основанная в 1988 году, Hacıbaba была создана как бренд,<br> который бережно представляет рахат-лукум, традиционные<br> десерты и местные деликатесы. Hacıbaba, которая с момента<br> своего основания опирается на принципы качества, доверия<br> и вкуса, сегодня является не просто брендом десертов; это<br> образ жизни и культурный посол.</p>'
                },
                {
                    type: 'image',
                    src: imageBasePath + 'about__image-1.jpg'
                },
                {
                    type: 'text',
                    content: '<h4>Ценность бренда и видение</h4><p>Hacıbaba продолжает свой путь с девизом «качество<br> в каждом кусочке, доверие к каждому продукту»; он<br> предлагает опыт, а не просто продает десерты. Бренд<br> сочетает простоту с элегантностью, традиции с<br> инновациями. Его цель — сделать рахат-лукум и<br> традиционные десерты из Турции мировым брендом<br> и перенести вкусы этой географии в будущее.</p>'
                },
                {
                    type: 'image',
                    src: imageBasePath + 'about__image-2.jpg'
                },
                {
                    type: 'text',
                    content: '<h4>Подпись Мастера</h4><p>Видение, изложенное основателем Hacıbaba,<br> сосредоточено на понимании «самого натурального<br> материала, самого настоящего вкуса». Каждый продукт<br> готовится руками экспертов по традиционным рецептам<br> и представляется в соответствии с современными<br> стандартами гигиены. Hacıbaba сочетает глубоко<br> укоренившееся наследие турецкой кухни с современным<br> эстетическим и качественным пониманием для создания<br> вкусов, неподвластных времени.</p>'
                },
                {
                    type: 'image',
                    src: imageBasePath + 'about__image-3.jpg'
                }
            ],
            tablet: [
                {
                    type: 'text',
                    content: '<h4>Ценность бренда и видение</h4><p>Hacıbaba продолжает свой путь с девизом «качество в каждом кусочке, доверие к каждому продукту»; он предлагает опыт, а не просто продает десерты. Бренд сочетает простоту с элегантностью, традиции с инновациями. Его цель — сделать рахат-лукум и традиционные десерты из Турции мировым брендом и перенести вкусы этой географии в будущее.</p>'
                },
                {
                    type: 'image',
                    src: imageBasePath + 'about__image-4.jpg'
                },
                {
                    type: 'text',
                    content: '<h4>Hacıbaba Flavors – мастер вкуса, вдохновленный традициями, с 1988 года.</h4><p>Основанная в 1988 году, Hacıbaba была создана как бренд, который бережно представляет рахат-лукум, традиционные десерты и местные деликатесы. Hacıbaba, которая с момента своего основания опирается на принципы качества, доверия и вкуса, сегодня является не просто брендом десертов; это образ жизни и культурный посол.</p>'
                },
                {
                    type: 'image',
                    src: imageBasePath + 'about__image-5.jpg'
                },
                {
                    type: 'text',
                    content: '<h4>Подпись Мастера</h4><p>Видение, изложенное основателем Hacıbaba, сосредоточено на понимании «самого натурального материала, самого настоящего вкуса». Каждый продукт готовится руками экспертов по традиционным рецептам и представляется в соответствии с современными стандартами гигиены. Hacıbaba сочетает глубоко укоренившееся наследие турецкой кухни с современным эстетическим и качественным пониманием для создания вкусов, неподвластных времени.</p>'
                },
                {
                    type: 'image',
                    src: imageBasePath + 'about__image-6.jpg'
                }
            ],
            mobile: [
                // Можно использовать те же данные, что и для tablet, или создать отдельные
                // В данном примере использую те же, что и для tablet
                {
                    type: 'text',
                    content: '<h4>Ценность бренда и видение</h4><p>Hacıbaba продолжает свой путь с девизом «качество в каждом кусочке, доверие к каждому продукту»; он предлагает опыт, а не просто продает десерты. Бренд сочетает простоту с элегантностью, традиции с инновациями. Его цель — сделать рахат-лукум и традиционные десерты из Турции мировым брендом и перенести вкусы этой географии в будущее.</p>'
                },
                {
                    type: 'image',
                    src: imageBasePath + 'about__image-4.jpg'
                },
                {
                    type: 'text',
                    content: '<h4>Hacıbaba Flavors – мастер вкуса, вдохновленный традициями, с 1988 года.</h4><p>Основанная в 1988 году, Hacıbaba была создана как бренд, который бережно представляет рахат-лукум, традиционные десерты и местные деликатесы. Hacıbaba, которая с момента своего основания опирается на принципы качества, доверия и вкуса, сегодня является не просто брендом десертов; это образ жизни и культурный посол.</p>'
                },
                {
                    type: 'image',
                    src: imageBasePath + 'about__image-5.jpg'
                },
                {
                    type: 'text',
                    content: '<h4>Подпись Мастера</h4><p>Видение, изложенное основателем Hacıbaba, сосредоточено на понимании «самого натурального материала, самого настоящего вкуса». Каждый продукт готовится руками экспертов по традиционным рецептам и представляется в соответствии с современными стандартами гигиены. Hacıbaba сочетает глубоко укоренившееся наследие турецкой кухни с современным эстетическим и качественным пониманием для создания вкусов, неподвластных времени.</p>'
                },
                {
                    type: 'image',
                    src: imageBasePath + 'about__image-6.jpg'
                }
            ]
        };

        // Функция определения типа устройства
        function getDeviceType() {
            const width = window.innerWidth;
            if (width < 768) return 'mobile';
            if (width < 1024) return 'tablet';
            return 'desktop';
        }

        // Рендер контента в зависимости от устройства
        function renderContent() {
            $aboutWrapper.empty();
            const deviceType = getDeviceType();
            const content = aboutData[deviceType];

            content.forEach(item => {
                if (item.type === 'text') {
                    $aboutWrapper.append(`<div class="about__text">${item.content}</div>`);
                } else if (item.type === 'image') {
                    $aboutWrapper.append(`<img src="${item.src}" alt="" class="about__image">`);
                }
            });
        }

        // Первоначальный рендер
        renderContent();

        // Реакция на изменение размера окна
        $(window).on('resize', debounce(function() {
            renderContent();
        }, 300));
    }

    // Инициализация при загрузке документа
    $(document).ready(function() {
        initAboutSection();
    });

})(jQuery);